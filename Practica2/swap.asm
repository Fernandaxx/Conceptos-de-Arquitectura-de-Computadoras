;SWAP PARAMETROS POR REF VIA PILA

ORG 1000H
NUM1 DW 5
NUM2 DW 3

ORG 3000H
;INTERCAMBIA DOS PARAMETROS ENVIADOS POR REF VIA PILA
SWAP: PUSH AX
PUSH BX
PUSH CX
PUSH DX


MOV BX, SP
;TOMAR DIR NUM1
ADD BX,12 ; CANTIDAD DE ELEMENTOS EN LA PILA SOBRE NUM1 (6 *2) 
MOV AX, [BX]

;TOMAR DIR NUM2
SUB BX, 2
MOV CX, [BX]
;TOMAR VALOR DE NUM1
MOV BX,AX; BX = DIR NUM1
MOV AX, [BX] ; AX =VALOR  NUM1
MOV DX, BX ; GUARDO LA DIR NUM1

;TOMAR VALOR NUM2
MOV BX,CX ; BX= DIR NUM2
MOV CX, [BX] ; CX =  VALOR NUM2

;INSERTAR VALOR DE NUM1 EN DIR DE NUM2
MOV [BX] ,AX ; DIR NUM 2 -> NUM1


;INSERTAR VALOR DE NUM2 EN DIR DE NUM1
MOV BX, DX ; RECUPERO LA DIR DE NUM1
MOV [BX], CX ; DIR NUM1-> NUM2

POP DX
POP CX
POP BX
POP AX

RET 


ORG 2000H
;MANDAMOS LOS PARAMETROS
MOV AX, OFFSET NUM1
PUSH AX

MOV AX, OFFSET NUM2
PUSH AX

CALL SWAP
HLT 
END

